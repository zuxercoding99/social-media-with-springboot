<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <title>Feed ¬∑ Social Media</title>
    <link rel="shortcut icon" href="icons/favicon.png" type="image/png" />

    <style>
      /* -----------------------
     THEME & COLOR VARIABLES
     ----------------------- */
      :root {
        --user-color: #1fe1d2;
        --user-color-dark: #3076e0;

        /* LIGHT = valores actuales (NO cambian visualmente) */
        --bg-main: #ffffff; /* body background */
        --bg-soft: #f5f8fa; /* subtle backgrounds (chat, hover, etc) */
        --bg-card: #ffffff; /* card / container / tweet background */

        --text-main: #0f1419; /* main text color */
        --text-soft: #657786; /* secondary text / meta */
        --muted: #8899a6;

        --border-soft: #eff3f4; /* light borders */
        --border: #ccd6dd; /* inputs etc */

        --hover-soft: #f5f8fa; /* hover bg in light mode */

        --overlay-bg: rgba(255, 255, 255, 0.95); /* image overlay (light) */

        --bubble-bg: #e6e8eb; /* public chat bubble (light) */

        --link-color: #1d9bf0;

        --danger: #e0245e;
        --success: #17bf63;

        --post-disabled: #aab8c2;
      }

      /* DARK MODE OVERRIDES (activated with body[data-theme="dark"]) */
      body[data-theme="dark"] {
        --bg-main: #0f1419;
        --bg-soft: #16181c;
        --bg-card: #1d1f23;

        --text-main: #e7e9ea;
        --text-soft: #8b98a5;
        --muted: #8b98a5;

        --border-soft: #2f3336;
        --border: #2f3336;

        --hover-soft: #202327;

        --overlay-bg: rgba(0, 0, 0, 0.85);

        --bubble-bg: #252a2d;

        --link-color: #1d9bf0;

        --danger: #f9708d;
        --success: #3ddc84;

        --post-disabled: #3a4146;
      }

      /* -----------------------
     GENERAL
     ----------------------- */
      body.theme-loading header,
      body.theme-loading .sidebar::before {
        opacity: 0;
      }

      body {
        transition: opacity 0.25s ease;
      }

      * {
        box-sizing: border-box;
      }

      body {
        font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto,
          Helvetica, Arial, sans-serif;
        line-height: 1.4;
        color: var(--text-main);
        margin: 0;
        background: var(--bg-main);
      }

      /* HEADER */
      header {
        background: linear-gradient(
          135deg,
          var(--user-color),
          var(--user-color-dark)
        );
        color: white;
        padding: 12px 20px;
        display: flex;
        align-items: center;
        flex-wrap: wrap;
        position: sticky;
        top: 0;
        z-index: 1500;
        transition: background 0.3s, opacity 0.3s;
      }
      header.scrolled {
        opacity: 0.62;
      }

      header a.header-title {
        color: white;
        text-decoration: none;
        font-weight: bold;
        cursor: pointer;
      }

      .header-left {
        display: flex;
        align-items: center;
        gap: 10px;
        font-weight: bold;
        font-size: 18px;
      }
      .header-more-btn {
        width: 18px;
        height: 18px;
        cursor: pointer;
        filter: invert(1);
        opacity: 0.95;
      }
      .header-more-btn:hover {
        opacity: 0.8;
        transform: scale(1.05);
        transition: 0.12s;
      }

      /* SIDEBAR */
      #sidebarBackdrop {
        position: fixed;
        left: 0;
        top: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.18);
        display: none;
        z-index: 1200;
      }
      .sidebar {
        position: fixed;
        left: 0;
        top: 0;
        height: 100%;
        width: 220px;
        max-width: 80%;
        background: var(--bg-card);
        box-shadow: 2px 0 12px rgba(0, 0, 0, 0.12);
        z-index: 1300;
        transform: translateX(-100%);
        transition: transform 0.22s ease;
        display: flex;
        flex-direction: column;
        padding: 12px;
        /* dejar overflow hidden en el contenedor principal para evitar 'double scroll' */
        overflow: hidden;
      }

      .sidebar-nav a:hover {
        background: color-mix(in srgb, var(--user-color), var(--bg-card) 85%);
      }

      .sidebar-nav a.active {
        color: var(--user-color);
      }

      .sidebar::before {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        height: 120px;
        width: 100%;
        background: linear-gradient(
          135deg,
          var(--user-color),
          var(--user-color-dark)
        );
        z-index: -1;
      }

      .sidebar.open {
        transform: translateX(0);
      }
      .sidebar-user {
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 4px;
        padding-top: 40px;
        padding-bottom: 24px;

        flex: 0 0 auto;
      }
      .sidebar-user img {
        width: 96px;
        height: 96px;
        border-radius: 50%;
        object-fit: cover;
        cursor: pointer;
      }
      .sidebar-user .displayname {
        font-weight: bold;
        font-size: 20px;
        color: var(--text-main);

        max-width: 100%;
        text-align: center;

        overflow: hidden;
        text-overflow: ellipsis;
        white-space: nowrap;
      }
      .sidebar-user .username-small {
        font-size: 16px;
        color: var(--text-soft);

        overflow: hidden;
        text-overflow: ellipsis;
        white-space: nowrap;
      }
      .sidebar-nav {
        flex: 1 1 auto; /* ocupa el resto del alto disponible */
        overflow-y: auto; /* aqu√≠ activamos scroll cuando haga falta */
        padding-right: 6px; /* para que no choque con scrollbar */
        margin-top: 12px;
        display: flex;
        flex-direction: column;
        gap: 12px;
      }
      /* suaviza scroll en iOS */
      .sidebar-nav {
        -webkit-overflow-scrolling: touch;
      }

      /* opcional: estilos para scrollbar */
      .sidebar-nav::-webkit-scrollbar {
        width: 10px;
      }
      .sidebar-nav::-webkit-scrollbar-thumb {
        background: rgba(0, 0, 0, 0.12);
        border-radius: 10px;
      }

      .sidebar-icon {
        filter: none;
      }
      body[data-theme="dark"] .sidebar-icon {
        filter: invert(1) brightness(0.95);
      }

      .sidebar-nav a {
        display: flex;
        align-items: center;
        gap: 12px;
        color: var(--text-main);
        text-decoration: none;
        padding: 12px 16px;
        border-radius: 12px;
        font-weight: 600;
        font-size: 16px;
      }
      .sidebar-nav a img {
        width: 24px;
        height: 24px;
        object-fit: cover;
        filter: none;
      }
      .sidebar-nav a:hover {
        background: var(--hover-soft);
      }

      /* LAYOUT */
      .container {
        width: 100%;
        max-width: 618px;
        margin: 12px auto;
        padding: 0;
        background: var(--bg-card);
        border-left: 1px solid var(--border-soft);
        border-right: 1px solid var(--border-soft);
      }

      /* invertir colores en dark mode */
      .no-filter {
        filter: none;
      }

      body[data-theme="dark"] .filter-dark-mode {
        filter: invert(1) brightness(0.95);
      }

      /* COMPOSER */
      .composer {
        background: var(--bg-card);
        padding: 15px;
        border-bottom: 1px solid var(--border-soft);
        display: flex;
        gap: 12px;
      }
      .composer-avatar img {
        width: 48px;
        height: 48px;
        border-radius: 50%;
        object-fit: cover;
      }
      .composer-body {
        flex: 1;
        display: flex;
        flex-direction: column;
        gap: 6px;
      }

      .privacy-select {
        width: 100px;
        height: 24px;
        border: 1px solid var(--user-color);
        border-radius: 6px;
        color: var(--user-color);
        font-weight: bold;
        background: var(--bg-card);
        padding: 2px 6px;
      }

      .composer textarea {
        width: 100%;
        border: none;
        resize: none;
        font-size: 15px;
        min-height: 50px;
        margin-top: 4px;
        outline: none;
        color: var(--text-main);
        background: transparent;
      }

      .composer-footer {
        display: flex;
        justify-content: space-between;
        align-items: center;

        border-top: 1px solid var(--border-soft);
        padding-top: 8px;
        margin-top: 8px;
      }

      .footer-left {
        display: flex;
        align-items: center;
      }

      .footer-right {
        display: flex;
        align-items: center;
        gap: 20px;
      }

      .counter {
        font-size: 13px;
        color: var(--text-soft);
      }

      .file-label img {
        width: 20px;
        height: 20px;
        cursor: pointer;
      }
      #file {
        display: none;
      }
      .post-btn {
        width: 72px;
        height: 36px;
        background: var(--user-color);
        color: white;
        border: none;
        border-radius: 20px;
        cursor: pointer;
        font-weight: bold;
      }
      .post-btn:disabled {
        background: var(--post-disabled);
        cursor: default;
      }

      .preview-container {
        display: none;
        margin-top: 6px;
        position: relative;
        border-radius: 12px;
        overflow: hidden;
        background: var(--bg-card);
      }
      .preview-container img {
        width: 100%;
        height: auto;
        object-fit: contain;
        display: block;
      }
      .preview-container .close-btn {
        position: absolute;
        right: 6px;
        top: 6px;
        width: 24px;
        height: 24px;
        cursor: pointer;
      }

      /* TWEET (unificado con user.html) */
      .tweet {
        margin: 0 auto;
        
        background: var(--bg-card);
        border-top: 1px solid var(--border-soft);
        border-radius: 0;
      }
      .tweet-layout {
        display: flex;
        align-items: flex-start;
        gap: 12px;
      }
      .tweet-avatar {
        width: 40px;
        flex-shrink: 0;
      }
      .tweet-avatar img {
        width: 40px;
        height: 40px;
        border-radius: 50%;
        object-fit: cover;
        cursor: pointer;
      }
      .tweet-body {
        flex: 1;
        padding-bottom: 12px;
        min-width: 0;
      }
      .tweet-header {
        display: flex;
        align-items: center;
        justify-content: space-between;
        position: relative;
        gap: 8px;
      }
      .tweet-user {
        display: flex;
        align-items: center;
        flex-wrap: wrap;
        min-width: 0;
        font-size: 15px;
      }

      .tweet-user .display-name {
        padding: 0px 6px 0px 0px;
        font-size: 15px;
      }

      .tweet-user .dot {
        padding: 0px 6px;
      }

      /* ===== FIX iconos men√∫ ‚ãÆ FEED ===== */
      .tweet-header .options-menu .option {
        display: flex;
        align-items: center;
        gap: 10px;

        line-height: 1.2;
        white-space: nowrap;
      }

      .tweet-header .options-menu .option img {
        width: 16px;
        height: 16px;

        display: block;
        flex-shrink: 0;
        object-fit: contain;
      }

      .display-name {
        font-weight: bold;
        color: var(--text-main);
        cursor: pointer;
      }
      .username {
        font-size: 15px;
        color: var(--text-soft);
        cursor: pointer;
      }
      .post-time {
        font-size: 15px;
        color: var(--text-soft);

        white-space: nowrap;
      }
      .tweet-privacy-inline {
        font-size: 13px;
        color: rgb(83, 100, 113);
        white-space: nowrap;
        opacity: 0.85;
        margin-left: 6px;
      }
      .tweet-content {
        font-size: 15px;
        line-height: 1.45;
        word-wrap: break-word;
        white-space: pre-wrap;
        color: var(--text-main);
      }

      .tweet-content a,
      .user-text a,
      .bio a {
        color: var(--link-color);
        text-decoration: none;
      }

      .tweet-content a:hover {
        text-decoration: underline;
      }

      .tweet-image {
        margin-top: 12px;
        cursor: pointer;
        border-radius: 16px;
        overflow: hidden;

        max-height: auto;
        max-width: 516px;

        display: flex;
        align-items: center;
        justify-content: flex-start;

        background: var(--bg-card);
      }

      .tweet-image img {
        max-width: 100%;
        max-height: 500px;
        border: 1px solid var(--border-soft);

        width: auto;
        height: auto;

        object-fit: contain;
        display: block;

        border-radius: 16px; /* üëà redondeo real */
        overflow: hidden; /* üëà recorte limpio */
      }

      /* MENU ‚ãÆ */
      .more-btn {
        width: 18px;
        height: 18px;
        flex-shrink: 0;
        cursor: pointer;
        opacity: 0.8;
      }
      .more-btn:hover {
        opacity: 1;
      }
      .options-menu {
        position: absolute;
        top: 28px;
        right: 0;
        background: var(--bg-card);
        border: 1px solid var(--border-soft);
        border-radius: 12px;
        box-shadow: 0 6px 16px rgba(0, 0, 0, 0.12);
        display: none;
        flex-direction: column;
        min-width: 160px;
        padding: 6px 0;
        z-index: 50;
      }
      .options-menu .option {
        padding: 10px 14px;
        display: flex;
        gap: 10px;
        align-items: center;
        cursor: pointer;
        font-size: 14px;
      }
      .options-menu .option:hover {
        background: var(--hover-soft);
      }
      .options-menu .delete-option {
        color: var(--danger);
      }

      .empty {
        text-align: center;
        color: var(--text-soft);
        margin: 30px 0;
      }

      /* IMAGE LIGHTBOX */
      .image-overlay {
        position: fixed;
        inset: 0;
        background: var(--overlay-bg);
        display: none;
        align-items: center;
        justify-content: center;
        z-index: 3000;
        padding: 24px;
      }
      .image-overlay img {
        width: 80vw;
        height: 80vh;
        max-width: 900px;
        max-height: 700px;
        object-fit: contain;
        border-radius: 14px;
        box-shadow: 0 12px 40px rgba(0, 0, 0, 0.35);
        cursor: zoom-out;
      }

      /* Defensivo para cualquier texto ingresado por el usuario*/
      .user-text {
        white-space: normal !important;
        overflow-wrap: anywhere;
        word-break: break-word;
      }

      /* zona clickeable del post */
      .tweet-clickable {
        cursor: pointer;
        padding: 12px 16px;
        border-radius: 8px;
        transition: background 0.15s ease;
      }

      .tweet-clickable:hover {
        background: var(--hover-soft);
      }

      /* ===== TWEET ACTIONS ===== */
      .tweet-actions {
        display: flex;
        gap: 132px;
        margin-top: 14px;
        color: var(--text-soft);
        font-size: 14px;
      }

      .tweet-action {
        display: flex;
        align-items: center;
        gap: 6px;
        cursor: pointer;
        user-select: none;
      }

      .tweet-action img {
        width: 18px;
        height: 18px;
        stroke: var(--text-soft);
        fill: var(--bg-card);
      }

      .tweet-action svg {
        width: 18px;
        height: 18px;
        display: block;
      }

      .like-action svg {
        transition: transform 0.15s ease, color 0.15s ease;
      }

      .like-action.liked svg {
        transform: scale(1.2);
      }

      .like-action {
        color: var(--text-soft);
        cursor: pointer;
      }

      .like-action.liked {
        color: #f91880;
      }

      .like-icon {
        width: 20px;
        height: 20px;
      }

      /* responsive */
      @media (max-width: 480px) {
        .composer {
          flex-direction: column;
        }

        .container {
          margin: 6px auto;
        }
      }

      @media (max-width: 480px) {
        .container {
          margin: 0px;
          border: none;
          padding: 0 0px;
        }

        @media (max-width: 480px) {
          .sidebar {
            width: 100%;
            max-width: 100%;
          }
          .sidebar-user .displayname,
          .sidebar-user .username-small {
            white-space: normal;
            text-align: center;
          }
        }

        @media (max-width: 480px) {
          .tweet-actions {
            gap: 12px;
            flex-wrap: wrap;
          }
          .tweet-image iframe {
            width: 100%;
            height: auto;
          }
        }

        @media (max-width: 480px) {
          .image-overlay {
            padding: 12px;
          }
        }

        @media (max-width: 480px) {
          body {
            font-size: 16px;
          }
        }
      }

      /* ================= PUBLIC CHAT FLOAT ================= */

      .public-chat {
        position: fixed;
        bottom: 24px;
        right: 24px;
        z-index: 2500;
        font-family: inherit;
      }

      /* ---------- TOGGLE CIRCULAR ---------- */
      .chat-toggle {
        width: 56px;
        height: 56px;
        border-radius: 50%;
        background: linear-gradient(
          135deg,
          var(--user-color),
          var(--user-color-dark)
        );
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        box-shadow: 0 6px 18px rgba(0, 0, 0, 0.25);
      }

      .chat-toggle img {
        width: 26px;
        height: 26px;
        filter: invert(1);
      }

      /* ---------- WINDOW ---------- */
      .chat-window {
        width: 320px;
        height: 420px;
        background: var(--bg-card);
        border-radius: 18px;
        box-shadow: 0 10px 40px rgba(0, 0, 0, 0.35);
        display: flex;
        flex-direction: column;
        overflow: hidden;
      }

      /* ---------- HEADER ---------- */
      .chat-header {
        padding: 12px;
        text-align: center;
        font-weight: bold;
        color: white;
        background: linear-gradient(
          135deg,
          var(--user-color),
          var(--user-color-dark)
        );
        cursor: pointer;
      }

      /* ---------- MESSAGES ---------- */
      .chat-messages {
        flex: 1;
        padding: 12px;
        overflow-y: auto;
        display: flex;
        flex-direction: column;
        gap: 8px;
        background: var(--bg-soft);
      }

      .chat-message {
        background: var(--bg-card);
        padding: 8px 10px;
        border-radius: 12px;
        font-size: 14px;
        color: var(--text-main);
      }

      .chat-message .user {
        font-weight: bold;
        font-size: 13px;
        margin-bottom: 2px;
      }

      /* ---------- INPUT ---------- */
      .chat-input {
        display: flex;
        gap: 8px;
        padding: 10px;
        border-top: 1px solid var(--border-soft);
      }

      .chat-input input {
        flex: 1;
        border: 1px solid var(--border);
        border-radius: 20px;
        padding: 6px 12px;
        outline: none;
        background: var(--bg-card);
        color: var(--text-main);
      }

      .chat-input button {
        background: var(--user-color);
        border: none;
        color: white;
        border-radius: 20px;
        padding: 6px 14px;
        cursor: pointer;
        font-weight: bold;
      }

      /* ---------- STATES ---------- */
      .public-chat.collapsed .chat-window {
        display: none;
      }

      .public-chat:not(.collapsed) .chat-toggle {
        display: none;
      }

      /* ---------- MOBILE ---------- */
      @media (max-width: 480px) {
        .chat-window {
          width: calc(100vw - 24px);
          height: 60vh;
        }
      }

      /* ===== PUBLIC CHAT - REUSE CHAT MESSAGE STYLES ===== */

      .message-row {
        display: flex;
        gap: 10px;
        align-items: flex-start;
        max-width: 100%;
      }

      .message-row.me {
        flex-direction: row-reverse;
      }

      .message-avatar {
        width: 32px;
        height: 32px;
        border-radius: 50%;
        object-fit: cover;
        flex-shrink: 0;
      }

      .message-bubble-wrap {
        max-width: 100%;
        width: 100%;
        min-width: 0;
        display: flex;
        flex-direction: column;
        gap: 4px;
      }

      .message-header {
        display: flex;
        align-items: center;
        gap: 8px;
      }

      .message-author {
        font-weight: 600;
        font-size: 14px;
        cursor: pointer;
        color: var(--text-main);
      }

      .message-time {
        font-size: 12px;
        color: #6b7280;
      }

      .message-bubble {
        background: var(--bubble-bg);
        padding: 10px 12x;
        width: 100%;
        border-radius: 16px;
        font-size: 16px;
        line-height: 1.45;
        word-wrap: break-word;
        white-space: pre-wrap;
        color: var(--text-main);
      }

      .message-row.me .message-bubble {
        background: #1e9cf1;
        color: white;
      }

      .chat-username:hover {
        text-decoration: underline;
      }

      /* Efecto snowflake */
      .snowflake {
        color: #fff;
        font-size: 1em;
        font-family: Arial, sans-serif;
        text-shadow: 0 0 5px #000;
      }
      .snowflake,
      .snowflake .inner {
        animation-iteration-count: infinite;
        animation-play-state: running;
      }
      @keyframes snowflakes-fall {
        0% {
          transform: translateY(0);
        }
        100% {
          transform: translateY(110vh);
        }
      }
      @keyframes snowflakes-shake {
        0%,
        100% {
          transform: translateX(0);
        }
        50% {
          transform: translateX(80px);
        }
      }
      .snowflake {
        position: fixed;
        top: -10%;
        z-index: 9999;
        -webkit-user-select: none;
        user-select: none;
        cursor: default;
        pointer-events: none;
        animation-name: snowflakes-shake;
        animation-duration: 3s;
        animation-timing-function: ease-in-out;
      }
      .snowflake .inner {
        animation-duration: 10s;
        animation-name: snowflakes-fall;
        animation-timing-function: linear;
      }
      .snowflake:nth-of-type(0) {
        left: 1%;
        animation-delay: 0s;
      }
      .snowflake:nth-of-type(0) .inner {
        animation-delay: 0s;
      }
      .snowflake:nth-of-type(1) {
        left: 10%;
        animation-delay: 1s;
      }
      .snowflake:nth-of-type(1) .inner {
        animation-delay: 1s;
      }
      .snowflake:nth-of-type(2) {
        left: 20%;
        animation-delay: 0.5s;
      }
      .snowflake:nth-of-type(2) .inner {
        animation-delay: 6s;
      }
      .snowflake:nth-of-type(3) {
        left: 30%;
        animation-delay: 2s;
      }
      .snowflake:nth-of-type(3) .inner {
        animation-delay: 4s;
      }
      .snowflake:nth-of-type(4) {
        left: 40%;
        animation-delay: 2s;
      }
      .snowflake:nth-of-type(4) .inner {
        animation-delay: 2s;
      }
      .snowflake:nth-of-type(5) {
        left: 50%;
        animation-delay: 3s;
      }
      .snowflake:nth-of-type(5) .inner {
        animation-delay: 8s;
      }
      .snowflake:nth-of-type(6) {
        left: 60%;
        animation-delay: 2s;
      }
      .snowflake:nth-of-type(6) .inner {
        animation-delay: 6s;
      }
      .snowflake:nth-of-type(7) {
        left: 70%;
        animation-delay: 1s;
      }
      .snowflake:nth-of-type(7) .inner {
        animation-delay: 2.5s;
      }
      .snowflake:nth-of-type(8) {
        left: 80%;
        animation-delay: 0s;
      }
      .snowflake:nth-of-type(8) .inner {
        animation-delay: 1s;
      }
      .snowflake:nth-of-type(9) {
        left: 90%;
        animation-delay: 1.5s;
      }
      .snowflake:nth-of-type(9) .inner {
        animation-delay: 3s;
      }
      .snowflake:nth-of-type(10) {
        left: 25%;
        animation-delay: 0s;
      }
      .snowflake:nth-of-type(10) .inner {
        animation-delay: 2s;
      }
      .snowflake:nth-of-type(11) {
        left: 65%;
        animation-delay: 2.5s;
      }
      .snowflake:nth-of-type(11) .inner {
        animation-delay: 4s;
      }
    </style>
  </head>
  <body>
    <header>
      <div class="header-left">
        <img
          id="headerMoreBtn"
          src="icons/more.png"
          alt="menu"
          class="header-more-btn"
        />
        <a href="feed.html" class="header-title">RED SOCIAL</a>
      </div>
    </header>

    <div id="sidebarBackdrop"></div>
    <aside id="sidebar" class="sidebar" aria-hidden="true">
      <div class="sidebar-user">
        <img
          id="sidebarAvatar"
          src="icons/upload.png"
          alt="me"
          title="Ver perfil"
        />
        <div class="displayname" id="sidebarDisplayName" title="Ver perfil">
          Usuario
        </div>
        <div class="username-small" id="sidebarUsername" title="Ver perfil">
          @usuario
        </div>
      </div>

      <div class="sidebar-nav">
        <a href="feed.html"
          ><img src="icons/home.png" class="sidebar-icon" alt="" /> Home</a
        >
        <a href="requests.html"
          ><img src="icons/add-friend.png" class="sidebar-icon" alt="" />
          Solicitudes</a
        >
        <a href="chat.html"
          ><img src="icons/email.png" class="sidebar-icon" alt="" /> Chat</a
        >
        <a href="user.html"
          ><img src="icons/user.png" class="sidebar-icon" alt="" /> Profile</a
        >
        <a href="options.html" id="sidebarOptions">
          <img src="icons/settings.png" alt="Opciones" class="sidebar-icon" />
          Opciones
        </a>
        <a href="#" id="sidebarLogout"
          ><img src="icons/exit.png" class="sidebar-icon" alt="" /> Log out</a
        >
      </div>
    </aside>

    <div class="container">
      <!-- composer -->
      <div class="composer">
        <div class="composer-avatar"><img id="myAvatar" alt="mi avatar" /></div>
        <div class="composer-body">
          <div style="display: flex; gap: 8px; align-items: center">
            <select id="privacy" class="privacy-select">
              <option value="PUBLIC">P√∫blico</option>
              <option value="FRIENDS">Amigos</option>
              <option value="PRIVATE">Privado</option>
            </select>
          </div>
          <textarea id="content" placeholder="¬øQu√© est√° pasando?"></textarea>

          <div id="previewContainer" class="preview-container">
            <img id="preview" alt="preview" />
            <img
              src="icons/close.png"
              class="close-btn"
              onclick="removePreview()"
              alt="close"
            />
          </div>

          <div class="composer-footer">
            <div class="footer-left">
              <label for="file" class="file-label" title="Subir imagen"
                ><img
                  src="icons/upload.png"
                  class="no-filter filter-dark-mode"
                  alt="upload"
              /></label>
              <input
                type="file"
                id="file"
                accept=".jpg,.jpeg,.png"
                onchange="previewImg()"
              />
            </div>
            <div class="footer-right">
              <span id="counter" class="counter">0 / 300</span>
              <button
                id="postBtn"
                class="post-btn"
                disabled
                onclick="publish()"
              >
                Post
              </button>
            </div>
          </div>
        </div>
      </div>

      <!-- feed container -->
      <div id="feed"></div>
    </div>

    <!-- lightbox -->
    <div id="imageOverlay" class="image-overlay">
      <img id="overlayImg" alt="imagen completa" />
    </div>

    <!-- ================= PUBLIC CHAT FLOAT ================= -->
    <div id="publicChat" class="public-chat collapsed">
      <!-- bot√≥n circular -->
      <div id="chatToggle" class="chat-toggle">
        <img src="icons/message.png" alt="Chat p√∫blico" />
      </div>

      <!-- ventana chat -->
      <div class="chat-window">
        <div class="chat-header" id="chatHeader">Chat P√∫blico</div>

        <div class="chat-messages" id="chatMessages"></div>

        <div class="chat-input">
          <input
            type="text"
            id="chatInput"
            placeholder="Escrib√≠ un mensaje..."
            maxlength="300"
          />
          <button id="chatSend">Enviar</button>
        </div>
      </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/sockjs-client@1/dist/sockjs.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/stompjs@2.3.3/lib/stomp.min.js"></script>
    <script src="config.js"></script>

    <script type="module">
      import { fetchWithAuth, forceLogout, connectWSWithAuth } from "./auth.js";

      document.body.dataset.theme = localStorage.getItem("mode") || "light";
      document.body.classList.add("theme-loading");

      const API = CONFIG.API_BASE_URL;

      if (!localStorage.getItem("accessToken")) {
        location.href = "login.html";
      }

      const token = localStorage.getItem("accessToken");
      const username = localStorage.getItem("username");
      const displayName = localStorage.getItem("displayName");
      const avatarUrl = localStorage.getItem("avatarUrl");
      if (!token) location.href = "login.html";

      const MAX = 300;
      const cache = new Map();
      const feedEl = document.getElementById("feed");

      /* ---------- SIDEBAR / HEADER ---------- */
      const headerMoreBtn = document.getElementById("headerMoreBtn");
      const sidebar = document.getElementById("sidebar");
      const sidebarBackdrop = document.getElementById("sidebarBackdrop");
      const sidebarAvatar = document.getElementById("sidebarAvatar");
      const sidebarDisplayName = document.getElementById("sidebarDisplayName");
      const sidebarUsernameEl = document.getElementById("sidebarUsername");
      const sidebarLogout = document.getElementById("sidebarLogout");
      const myAvatar = document.getElementById("myAvatar");

      function openSidebar() {
        sidebar.classList.add("open");
        sidebarBackdrop.style.display = "block";
        sidebar.setAttribute("aria-hidden", "false");
      }
      function closeSidebar() {
        sidebar.classList.remove("open");
        sidebarBackdrop.style.display = "none";
        sidebar.setAttribute("aria-hidden", "true");
      }

      headerMoreBtn.addEventListener("click", (e) => {
        e.stopPropagation();
        sidebar.classList.contains("open") ? closeSidebar() : openSidebar();
      });
      sidebarBackdrop.addEventListener("click", closeSidebar);

      sidebarDisplayName.innerText = displayName || username;
      sidebarUsernameEl.innerText = "@" + (username || "usuario");
      if (avatarUrl) {
        loadAvatar(avatarUrl).then((a) => {
          sidebarAvatar.src = a;
          myAvatar.src = a;
        });
      } else {
        sidebarAvatar.src = DEFAULT_AVATAR;
        myAvatar.src = DEFAULT_AVATAR;
      }

      // fallback por si el src falla en tiempo de render (evita loop infinito)
      sidebarAvatar.onerror = function () {
        this.onerror = null;
        this.src = DEFAULT_AVATAR;
      };
      myAvatar.onerror = function () {
        this.onerror = null;
        this.src = DEFAULT_AVATAR;
      };

      sidebarAvatar.addEventListener(
        "click",
        () => (location.href = `user.html?username=${username}`)
      );
      sidebarDisplayName.addEventListener(
        "click",
        () => (location.href = `user.html?username=${username}`)
      );
      sidebarUsernameEl.addEventListener(
        "click",
        () => (location.href = `user.html?username=${username}`)
      );
      sidebarLogout.addEventListener("click", forceLogout);

      /* ---------- UTIL ---------- */
      async function loadAvatar(url) {
        // si no hay url -> imagen por defecto
        if (!url) return DEFAULT_AVATAR;

        // si ya est√° en cach√©, devolverla
        if (cache.has(url)) return cache.get(url);

        try {
          const r = await fetchWithAuth(API + url);

          // si el backend responde 404 -> imagen por defecto
          if (r.status === 404) return DEFAULT_AVATAR;
          if (!r.ok) return DEFAULT_AVATAR;

          const blob = await r.blob();
          const o = URL.createObjectURL(blob);

          // guardar en cach√© para evitar nuevas descargas
          cache.set(url, o);
          return o;
        } catch (err) {
          // error de red -> imagen por defecto
          return DEFAULT_AVATAR;
        }
      }

      async function loadImg(url) {
        try {
          const r = await fetchWithAuth(API + url);
          if (!r.ok) return null;
          return URL.createObjectURL(await r.blob());
        } catch {
          return null;
        }
      }
      function timeAgo(date) {
        const d = new Date(date),
          now = new Date(),
          diff = (now - d) / 1000;
        if (diff < 60) return `${Math.floor(diff)}s`;
        if (diff < 3600) return `${Math.floor(diff / 60)}m`;
        if (diff < 86400) return `${Math.floor(diff / 3600)}h`;
        return `${Math.floor(diff / 86400)}d`;
      }

      function extractTweetUrl(text) {
        const m = text.match(
          /(https?:\/\/(?:www\.)?(?:twitter|x)\.com\/\w+\/status\/\d+)/
        );
        return m ? m[1] : null;
      }

      function extractYouTubeId(text) {
        const m = text.match(
          /(?:youtube\.com\/watch\?v=|youtu\.be\/)([a-zA-Z0-9_-]+)/
        );
        return m ? m[1] : null;
      }

      function renderUserText(text) {
        if (!text) return "";

        // 1Ô∏è‚É£ Escapar HTML (SEGURIDAD)
        let safe = text
          .replace(/&/g, "&amp;")
          .replace(/</g, "&lt;")
          .replace(/>/g, "&gt;")
          .replace(/"/g, "&quot;")
          .replace(/'/g, "&#039;");

        // 2Ô∏è‚É£ Convertir URLs en links
        safe = safe.replace(
          /(https?:\/\/[^\s<]+)/g,
          '<a href="$1" target="_blank" rel="noopener noreferrer">$1</a>'
        );

        // 3Ô∏è‚É£ Respetar saltos de l√≠nea
        safe = safe.replace(/\n/g, "<br>");

        return safe;
      }

      /* ---------- PRIVACY FORMAT (solo iconos para FRIENDS/PRIVATE) ---------- */
      function formatPrivacyIcon(p) {
        switch (p) {
          case "FRIENDS":
            return "üë•";
          case "PRIVATE":
            return "üîí";
          default:
            return ""; // PUBLIC -> nada
        }
      }

      /* ---------- TEXTAREA auto-grow y contador ---------- */
      const content = document.getElementById("content");
      const counter = document.getElementById("counter");
      const postBtn = document.getElementById("postBtn");
      content.addEventListener("input", () => {
        if (content.value.length > MAX)
          content.value = content.value.slice(0, MAX);
        content.style.height = "auto";
        content.style.height = content.scrollHeight + "px";
        counter.innerText = `${content.value.length} / ${MAX}`;
        postBtn.disabled = !content.value.trim();
      });

      /* ---------- IMAGE PREVIEW ---------- */
      function previewImg() {
        const file = document.getElementById("file");
        if (!file.files[0]) return;
        const container = document.getElementById("previewContainer");
        const img = document.getElementById("preview");
        img.src = URL.createObjectURL(file.files[0]);
        container.style.display = "block";
      }
      function removePreview() {
        const file = document.getElementById("file");
        file.value = "";
        document.getElementById("previewContainer").style.display = "none";
      }

      /* ---------- PUBLISH ---------- */
      let publishing = false;

      async function publish() {
        if (publishing) return;
        publishing = true;

        postBtn.disabled = true; // üëà bloqueo inmediato

        try {
          const fd = new FormData();
          fd.append("content", content.value);
          fd.append("privacy", document.getElementById("privacy").value);

          const file = document.getElementById("file");
          if (file.files[0]) fd.append("file", file.files[0]);

          const res = await fetchWithAuth(API + "/api/v1/posts", {
            method: "POST",
            body: fd,
          });

          if (!res.ok) {
            alert("Error al publicar");
            return;
          }

          content.value = "";
          removePreview();
          counter.innerText = "0 / 300";
          document.getElementById("privacy").value = "PUBLIC";

          await loadFeed();
        } finally {
          publishing = false;
        }
      }

      /* ---------- GLOBAL: cerrar men√∫s al clickear fuera (√∫nico listener) ---------- */
      document.addEventListener("click", () => {
        document
          .querySelectorAll(".options-menu, .profile-options-menu")
          .forEach((m) => {
            if (m) m.style.display = "none";
          });
      });

      /* ---------- LOAD FEED (usa estructura .tweet para compatibilidad visual) ---------- */
      async function loadFeed() {
        try {
          const params = new URLSearchParams(window.location.search);
          const page = params.get("page") ?? 0;
          const size = params.get("size") ?? 10;

          const r = await fetchWithAuth(
            `${API}/api/v1/posts/feed?page=${page}&size=${size}`
          );
          const p = await r.json();
          feedEl.innerHTML = "";
          if (!p.content?.length) {
            feedEl.innerHTML = `<div class="empty">No hay posts</div>`;
            return;
          }

          for (const x of p.content) {
            // crear article con estructura "tweet"
            const post = document.createElement("article");
            post.className = "tweet";

            const timeRel = timeAgo(x.createdAt);
            const dateFull = new Date(x.createdAt).toLocaleString("es-AR", {
              dateStyle: "short",
              timeStyle: "short",
            });

            // privacy icon (only show icon if not PUBLIC)
            const privacyIcon = formatPrivacyIcon(x.privacy);
            const privacyHtml = privacyIcon
              ? `<span class="tweet-privacy-inline" title="${x.privacy}">${privacyIcon}</span>`
              : "";

            post.innerHTML = `
                  <div class="tweet-clickable">
                    <div class="tweet-layout">
                        <div class="tweet-avatar"><img alt="avatar"></div>

                          <div class="tweet-body">
                            <div class="tweet-header">
                              <div class="tweet-user user-text">
                                <span class="display-name">${
                                  x.author.displayName
                                }</span>
                                <span class="username">@${
                                  x.author.username
                                }</span>
                                <span class="dot">¬∑</span>
                                <span class="post-time" title="${dateFull}">${timeRel}</span>
                                ${privacyHtml}
                              </div>

                              <img src="icons/more.png"  class="more-btn no-filter filter-dark-mode" alt="more">
                              <div class="options-menu"></div>
                            </div>

                            <div class="tweet-content user-text">${renderUserText(
                              x.content
                            )}</div>




                      </div>
                    </div>
                  `;

            const clickable = post.querySelector(".tweet-clickable");

            clickable.addEventListener("click", () => {
              location.href = `post.html?id=${x.id}`;
            });

            // avatar
            const avImg = post.querySelector(".tweet-avatar img");
            loadAvatar(x.author.avatarUrl).then((a) => (avImg.src = a));

            // fallback si falla al cargar la src
            avImg.onerror = function () {
              this.onerror = null;
              this.src = DEFAULT_AVATAR;
            };

            // clicks to profile
            const nameEl = post.querySelector(".display-name");
            const userEl = post.querySelector(".username");
            avImg.onclick =
              nameEl.onclick =
              userEl.onclick =
                (e) => {
                  e.stopPropagation();
                  location.href = `user.html?username=${x.author.username}`;
                };

            // file image (if any)
            if (x.file) {
              const fileUrl = await (async () => {
                const i = await loadImg(x.file.url);
                return i;
              })();
              if (fileUrl) {
                const wrap = document.createElement("div");
                wrap.className = "tweet-image";

                const im = document.createElement("img");
                im.src = fileUrl;

                wrap.appendChild(im);

                wrap.addEventListener("click", (e) => {
                  e.stopPropagation();
                  openImage(fileUrl);
                });

                post.querySelector(".tweet-body").appendChild(wrap);
              }
            }
            const tweetUrlRaw = extractTweetUrl(x.content);
            const tweetUrl = tweetUrlRaw
              ? tweetUrlRaw.replace("x.com", "twitter.com")
              : null;
            const yt = extractYouTubeId(x.content);
            if (yt && !x.file) {
              post.querySelector(".tweet-body").innerHTML += `
                      <div class="tweet-image">
                        <iframe
                          width="516"
                          height="290"
                          src="https://www.youtube.com/embed/${yt}"
                          frameborder="0"
                          allowfullscreen>
                        </iframe>
                      </div>
                    `;
            } else {
              if (tweetUrl && !x.file) {
                const wrap = document.createElement("div");
                wrap.className = "tweet-image";

                wrap.innerHTML = `
                      <blockquote class="twitter-tweet">
                        <a href="${tweetUrl}"></a>
                      </blockquote>
                    `;

                post.querySelector(".tweet-body").appendChild(wrap);

                // asegurar render del embed
                const render = () => {
                  if (window.twttr && window.twttr.widgets) {
                    window.twttr.widgets.load(wrap);
                  }
                };

                if (!window.twttr) {
                  const s = document.createElement("script");
                  s.src = "https://platform.twitter.com/widgets.js";
                  s.async = true;
                  s.onload = render;
                  document.body.appendChild(s);
                } else {
                  render();
                }
              }
            }

            // menu handling
            const moreBtn = post.querySelector(".more-btn");
            const menu = post.querySelector(".options-menu");

            moreBtn.onclick = (e) => {
              e.stopPropagation();
              if (!menu) return;
              // hide others
              document
                .querySelectorAll(".options-menu, .profile-options-menu")
                .forEach((m) => {
                  if (m !== menu) m.style.display = "none";
                });
              menu.style.display =
                menu.style.display === "flex" ? "none" : "flex";
            };

            // delete option only for author
            if (x.author.username === username) {
              const del = document.createElement("div");
              del.className = "option delete-option";
              del.innerHTML = `<img src="icons/delete.png" alt="del"> Eliminar`;
              del.onclick = async (e) => {
                e.stopPropagation();
                const res = await fetchWithAuth(`${API}/api/v1/posts/${x.id}`, {
                  method: "DELETE",
                });

                if (res.status === 204) post.remove();
                else alert("Error al eliminar el post");
              };
              if (menu) menu.appendChild(del);
            }

            const actions = document.createElement("div");
            actions.className = "tweet-actions";

            actions.innerHTML = `
                              <div class="tweet-action comment-action">
                                <img src="icons/comment.png" class="no-filter filter-dark-mode">
                                <span class="comment-count">${
                                  x.commentCount
                                }</span>
                              </div>

                              <div class="tweet-action like-action ${
                                x.liked ? "liked" : ""
                              }">
                                <svg viewBox="0 0 24 24" fill="currentColor">
                                  <path d="M15.7 4C18.87 4 21 6.98 21 9.76C21 15.39 12.16 20 12 20C11.84 20 3 15.39 3 9.76C3 6.98 5.13 4 8.3 4C10.12 4 11.31 4.91 12 5.71C12.69 4.91 13.88 4 15.7 4Z"
                                    stroke="currentColor"
                                    stroke-width="2"
                                    stroke-linecap="round"
                                    stroke-linejoin="round"/>
                                </svg>
                                <span class="like-count">${x.likeCount}</span>
                              </div>
      `;

            const commentAction = actions.querySelector(".comment-action");
            const likeAction = actions.querySelector(".like-action");
            const likeCountEl = actions.querySelector(".like-count");

            commentAction.addEventListener("click", (e) => {
              e.stopPropagation();
              location.href = `post.html?id=${x.id}`;
            });

            likeAction.addEventListener("click", async (e) => {
              e.stopPropagation();

              try {
                const res = await fetchWithAuth(
                  `${API}/api/v1/posts/${x.id}/like`,
                  {
                    method: "POST",
                  }
                );

                if (!res.ok) return;

                // optimistic update
                if (likeAction.classList.contains("liked")) {
                  likeAction.classList.remove("liked");
                  x.likeCount--;
                  x.liked = false;
                } else {
                  likeAction.classList.add("liked");
                  x.likeCount++;
                  x.liked = true;
                }

                likeCountEl.innerText = x.likeCount;
              } catch {
                console.error("Error toggling like");
              }
            });

            post.querySelector(".tweet-body").appendChild(actions);

            feedEl.appendChild(post);
          }
        } catch (e) {
          console.error("Error cargando feed", e);
          feedEl.innerHTML = `<div class="empty">Error al cargar posts</div>`;
        }
      }

      // inicializar
      loadFeed();

      // header scroll effect
      const header = document.querySelector("header");
      window.addEventListener("scroll", () => {
        if (window.scrollY > 5) header.classList.add("scrolled");
        else header.classList.remove("scrolled");
      });

      /* ---------- IMAGE LIGHTBOX ---------- */
      const imageOverlay = document.getElementById("imageOverlay");
      const overlayImg = document.getElementById("overlayImg");
      function openImage(src) {
        overlayImg.src = src;
        imageOverlay.style.display = "flex";
      }
      imageOverlay.addEventListener("click", (e) => {
        e.stopPropagation();
        imageOverlay.style.display = "none";
        overlayImg.src = "";
      });

      /*Color sidebar header banner*/
      function applyUserTheme(color) {
        const root = document.documentElement;

        if (color) {
          root.style.setProperty("--user-color", color);
          root.style.setProperty("--user-color-dark", darkenColor(color, 25));
        } else {
          root.style.setProperty("--user-color", "#1fe1d2");
          root.style.setProperty("--user-color-dark", "#3076e0");
        }
        document.body.classList.remove("theme-loading");
      }

      async function fetchMyProfile() {
        const r = await fetchWithAuth(`${API}/api/v1/users/me`);

        if (!r.ok) throw new Error("No se pudo cargar el perfil");

        return r.json();
      }

      async function initUserTheme() {
        try {
          const u = await fetchMyProfile();
          applyUserTheme(u.bannerColor);
        } catch (e) {
          console.warn("Usando tema por defecto", e);
          applyUserTheme(null);
        }
      }
      function darkenColor(hex, percent) {
        const num = parseInt(hex.replace("#", ""), 16);
        const amt = Math.round(2.55 * percent);
        const r = Math.max(0, (num >> 16) - amt);
        const g = Math.max(0, ((num >> 8) & 0x00ff) - amt);
        const b = Math.max(0, (num & 0x0000ff) - amt);

        return `rgb(${r}, ${g}, ${b})`;
      }

      /* ================= PUBLIC CHAT LOGIC ================= */

      const chat = document.getElementById("publicChat");
      const chatToggle = document.getElementById("chatToggle");
      const chatHeader = document.getElementById("chatHeader");
      const chatMessages = document.getElementById("chatMessages");
      const chatInput = document.getElementById("chatInput");
      const chatSend = document.getElementById("chatSend");

      /* ---------- WEBSOCKET PUBLIC CHAT ---------- */

      let stompClient = null;
      let reconnectAttempts = 0;

      async function connectPublicChat() {
        await connectWSWithAuth(connectPublicChatInternal);
      }

      function onWsError(error) {
        console.error("WS error / desconectado", error);

        if (stompClient) {
          stompClient.disconnect(() => {});
          stompClient = null;
        }

        reconnectAttempts++;

        const delay = Math.min(30000, 1000 * 2 ** reconnectAttempts);

        setTimeout(() => {
          console.log("Reintentando WS...");
          connectPublicChat();
        }, delay);
      }

      function connectPublicChatInternal(token) {
        return new Promise((resolve) => {
          const wsUrl = API + "/ws?token=" + encodeURIComponent(token);
          const socket = new SockJS(wsUrl);

          stompClient = Stomp.over(socket);
          stompClient.debug = null;

          stompClient.heartbeat.outgoing = 20000;
          stompClient.heartbeat.incoming = 20000;

          stompClient.connect(
            {},
            () => {
              console.log("‚úÖ WS conectado");
              reconnectAttempts = 0;

              stompClient.subscribe("/topic/public", (msg) => {
                renderPublicMessage(JSON.parse(msg.body));
              });

              resolve(true);
            },
            () => {
              console.warn("‚ùå WS fall√≥");
              resolve(false);
            }
          );
        });
      }

      /* toggle */
      chatToggle.onclick = () => {
        chat.classList.remove("collapsed");
      };
      chatHeader.onclick = () => chat.classList.add("collapsed");

      /* render message */
      function renderPublicMessage(m) {
        const isMe = m.senderUsername === username;

        const row = document.createElement("div");
        row.className = "message-row" + (isMe ? " me" : "");

        const time = m.sentAt
          ? new Date(m.sentAt).toLocaleTimeString([], {
              hour: "2-digit",
              minute: "2-digit",
            })
          : "";

        row.innerHTML = `
          <img
            class="message-avatar"
            id="avatarChat"
            alt="avatar"
          />

          <div class="message-bubble-wrap">
            <div class="message-header">
              <div class="message-author chat-username"
                   data-username="${m.senderUsername}">
                ${m.senderDisplayName || m.senderUsername}
              </div>
              <div class="message-time">${time}</div>
            </div>

            <div class="message-bubble">
              ${renderUserText(m.content)}
            </div>
          </div>
        `;

        const avatarChat = row.querySelector(".message-avatar");

        if (m.senderAvatarUrl) {
          loadAvatar(m.senderAvatarUrl).then((a) => {
            avatarChat.src = a;
          });
        } else {
          avatarChat.src = DEFAULT_AVATAR;
        }
        avatarChat.onerror = function () {
          this.onerror = null;
          this.src = DEFAULT_AVATAR;
        };
        // click al perfil
        row.querySelector(".chat-username").addEventListener("click", () => {
          location.href = `user.html?username=${m.senderUsername}`;
        });

        chatMessages.appendChild(row);
        chatMessages.scrollTop = chatMessages.scrollHeight;
      }

      /* send message */
      async function sendPublicMessage() {
        const text = chatInput.value.trim();
        if (!text) return;

        chatInput.value = "";

        try {
          const r = await fetchWithAuth(`${API}/api/v1/public-chat/messages`, {
            method: "POST",
            headers: {
              "Content-Type": "application/json",
            },
            body: JSON.stringify({ content: text }),
          });

          if (!r.ok) return;
        } catch (e) {
          console.error("Error enviando mensaje p√∫blico", e);
        }
      }

      chatSend.onclick = sendPublicMessage;
      chatInput.addEventListener("keydown", (e) => {
        if (e.key === "Enter") sendPublicMessage();
      });

      initUserTheme();
      connectPublicChat();

      // Exponer funciones
      window.publish = publish;
      window.previewImg = previewImg;
      window.removePreview = removePreview;
    </script>

    <div class="snowflakes" aria-hidden="true">
      <div class="snowflake"><div class="inner">‚ùÑ</div></div>
      <div class="snowflake"><div class="inner">‚ùÑ</div></div>
      <div class="snowflake"><div class="inner">‚ùÑ</div></div>
      <div class="snowflake"><div class="inner">‚ùÑ</div></div>
      <div class="snowflake"><div class="inner">‚ùÑ</div></div>
      <div class="snowflake"><div class="inner">‚ùÑ</div></div>
      <div class="snowflake"><div class="inner">‚ùÑ</div></div>
      <div class="snowflake"><div class="inner">‚ùÑ</div></div>
      <div class="snowflake"><div class="inner">‚ùÑ</div></div>
      <div class="snowflake"><div class="inner">‚ùÑ</div></div>
      <div class="snowflake"><div class="inner">‚ùÑ</div></div>
      <div class="snowflake"><div class="inner">‚ùÑ</div></div>
    </div>
  </body>
</html>
